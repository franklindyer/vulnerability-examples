import hashlib
import os
import random

# Interface for the database actions necessary for this login app template.
class LoginDatabaseManager():
    def __init__(self, dbfile):
        self.dbfile = dbfile

    def create_users_table(self):
        pass

    def add_user(self, uname, hpasswd, salt, personal): 
        pass

    # Return a tuple of values (hpasswd, salt, personal), or None.
    def get_user(self, uname):
        pass

class UnhashedLoginApp():
    def __init__(self, dbman):
        self.dbman = dbman

    # Add a new user with given username, password and personal info.
    def add_user(self, uname, passwd, personal):
        self.dbman.add_user(uname, passwd, '', personal)

    # Return (True, personal) or (False, '') depending on whether login is valid.
    def is_login(self, uname, passwd):
        user_row = self.dbman.get_user(uname)
        if user_row == None:
            return (False, '')
        real_passwd = user_row[0]
        correct = (passwd == real_passwd)
        if correct:
            return (True, user_row[2])
        return (False, '')

SelectedLoginApp = UnhashedLoginApp
