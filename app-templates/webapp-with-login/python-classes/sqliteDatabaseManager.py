import sqlite3

class SqliteLoginDatabaseManager(LoginDatabaseManager):
    def __init__(self, dbfile):
        super().__init__(dbfile)
        self.con = sqlite3.connect("accounts.db")

    def create_users_table(self):
        cur = self.con.cursor()
        cur.execute("CREATE TABLE users (username TEXT NOT NULL, password BLOB NOT NULL, salt BLOB NOT NULL, personal TEXT);")
        self.con.commit()

    def add_user(self, uname, hpasswd, salt, personal):
        cur = self.con.cursor()
        cur.execute("INSERT INTO users (username, password, salt, personal) VALUES (?, ?, ?, ?);", (uname, hpasswd, salt, personal,))
        self.con.commit()

    def get_user(self, uname):
        cur = self.con.cursor()
        res = cur.execute("SELECT (password, salt, personal) FROM users WHERE username=?;", (uname,))
        return res.fetchone()
