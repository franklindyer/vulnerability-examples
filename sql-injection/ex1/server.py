from flask import Flask, render_template, request
import sqlite3

app = Flask(__name__)

@app.route('/')
def index():
    return render_template("index.html")

@app.route('/login', methods=['POST'])
def login_page():
    user = request.form["username"]
    passwd = request.form["password"]

    con = sqlite3.connect("accounts.db")
    cur = con.cursor()
    query = "SELECT username FROM users WHERE username='" + user + "' AND password='" + passwd + "';"
    print(query)
    res = cur.execute(query)
    matches = res.fetchall()

    if matches == []:
        return "Invalid credentials."
    else:
        return "Welcome to the site, " + matches[0][0] + "!"


app.run()
